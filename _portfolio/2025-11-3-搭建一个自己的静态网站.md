---
title: 搭建一个自己的静态网站
subtitle: 基于 Jekyll 和 GitHub Pages 的个人博客搭建指南
image: https://s41.ax1x.com/2025/12/05/pZmPZPH.png
alt: Jekyll静态网站搭建项目
category: personal
featured: true
embed_url: https://lyzbcy.github.io/

caption:
  title: 捞鱼的博客
  subtitle: Jekyll + Chirpy 主题
  thumbnail: https://s41.ax1x.com/2025/12/05/pZmPZPH.png
---

## 📊 项目信息

- **完成时间**: 2025年11月
- **开发周期**: 2周
- **技术难度**: ⭐⭐⭐
- **项目类型**: 个人博客系统
- **在线地址**: [https://lyzbcy.github.io/](https://lyzbcy.github.io/)

## 1. 项目概述

本网站是一个基于静态网站生成器 (Static Site Generator, SSG) 构建的个人博客/知识库系统。它专注于内容的高效发布与阅读体验，采用 Markdown 编写内容，自动编译生成静态 HTML 页面。

## 2. 核心技术栈 (Tech Stack)

### 核心引擎
- **[Jekyll](https://jekyllrb.com/)**: 网站的核心构建引擎，基于 Ruby 开发。它负责将纯文本 (Markdown) 转化为静态网站和博客。
- **Ruby**: Jekyll 的运行环境语言。

### 主题与主要框架
- **[Jekyll Theme Chirpy](https://github.com/cotes2020/jekyll-theme-chirpy)** (SDK v7.4+): 
  - 采用响应式设计，完美适配移动端与桌面端。
  - 内置深色/浅色模式 (Dark/Light Mode) 切换。
  - 侧边栏导航架构。

### 前端技术
- **HTML5 / Liquid**: 使用 Liquid 模板语言进行动态内容的渲染与逻辑控制。
- **SCSS (Sass)**: 样式表预处理语言，用于模块化管理 CSS。
- **JavaScript (Vanilla JS)**: 处理前端交互，如侧边栏切换、搜索功能、PWA Service Worker 等。
- **Bootstrap**: (作为 Chirpy 主题的底层依赖) 提供了基础的网格系统和部分组件样式。

### 数据与内容
- **Markdown**: 内容创作的主要格式。
- **YAML**: 用于配置文件 (`_config.yml`) 和 Front Matter (文章元数据)。

## 🤔 为什么选择这个技术栈？

- **Jekyll**: GitHub Pages 原生支持，无需额外服务器成本，推送即部署
- **Chirpy 主题**: 功能完善的博客主题，开箱即用，节省大量开发时间
- **GitHub Actions**: 自动化部署流程，提交代码后自动构建发布
- **PWA 支持**: 提升用户体验，支持离线访问和添加到主屏幕
- **Markdown + YAML**: 简洁高效的内容管理方式，专注于写作本身

## 3. 关键功能特性

- **PWA (Progressive Web App)**: 支持离线访问和安装到主屏幕 (配置于 `_config.yml` 中 `pwa: enabled: true`)。
- **SEO 优化**: 集成 `jekyll-seo-tag` 插件，自动生成 meta 标签、Sitemap 等。
- **评论系统**: 支持多种评论插件 (Giscus, Disqus, Utterances)，当前配置可见 `_config.yml`。
- **网站统计**: 集成多种分析工具接口 (Google Analytics, Umami 等)。
- **RSS 订阅**: 自动生成 Atom XML Feed。
- **站内搜索**: 本地搜索索引功能。

## 4. 目录结构说明

```bash
.
├── _config.yml       # 核心配置文件 (站点设置、插件、主题配置等)
├── _posts/           # 博客文章源文件 (Markdown 格式)
├── _tabs/            # 独立页面 (如关于、归档、标签等)
├── _data/            # 静态数据文件 (如本地化字符串、社交链接等)
├── _includes/        # Liquid 模板片段 (Header, Footer, Sidebar 等)
├── _layouts/         # 页面布局模板
├── assets/           # 静态资源 (图片、编译后的 CSS/JS、第三方库)
├── Gemfile           # Ruby 依赖定义 (Jekyll 及插件版本)
└── .github/          # GitHub 配置
    └── workflows/    # GitHub Actions 自动部署脚本
```

## 5. 开发与部署 (DevOps)

### 本地开发
依赖于 Bundler 管理 Gem 环境：
```bash
# 安装依赖
bundle install

# 启动本地服务器 (支持实时重载)
bundle exec jekyll serve
```
*注：Windows 环境下使用 `wdm` 用于文件监控。*

### 持续集成与部署 (CI/CD)
本项目托管于 GitHub，并使用 **GitHub Actions** 进行自动化构建与部署。
- **Workflow**: `.github/workflows/pages-deploy.yml`
- **流程**:
    1. 代码 Push 到远程分支。
    2. GitHub Actions 触发构建任务。
    3. 安装 Ruby 环境与依赖。
    4. 执行 `jekyll build` 生成静态文件。
    5. Artifacts 上传并部署至 GitHub Pages 环境。

## 🤕 遇到的困难

### 1. Docker Desktop 连接问题

**问题描述**：Docker Desktop 在本地环境总是出现连接错误，无法正常使用容器化开发环境。

**解决方案**：改用 Cursor + Git 的工作流，直接使用 Jekyll 本地环境开发。

**收获**：Cursor 的开发体验非常流畅，结合 Git 完全可以替代容器化开发。不得不说 Cursor 真方便！

---

### 2. GitHub Pages 部署后功能缺失

**问题现象**：在本地 Jekyll 环境中测试时功能正常，但部署到 GitHub Pages 后某些功能（如动态效果）无法正常工作。

**根本原因**：AI 在本地修改了 Chirpy 主题的静态资源（位于 `assets/lib` 子模块），但 GitHub Pages 构建时子模块可能未初始化，导致文件缺失。

**解决方案**：
1. 不要直接修改 Chirpy 主题的静态资源
2. 将需要的文件复制到主仓库的相关目录（如 `assets/lib-custom/`）
3. 更新所有引用路径

**最佳实践**：
```bash
# 复制需要修改的文件
cp assets/lib/xxx.js assets/lib-custom/xxx.js

# 在 _includes 中更新引用
# 从: assets/lib/xxx.js
# 到: assets/lib-custom/xxx.js
```

**给 AI 的提示词**：
> 当需要修改 Chirpy 主题的静态资源时：
> 
> 不能直接修改 Chirpy 主题的静态资源（位于子模块中）。GitHub Pages 构建时子模块可能会未初始化，导致文件缺失。
> 
> 正确的做法：
> 1. 将要修改的文件复制到主仓库的相关目录（如 `assets/lib-custom/`）
> 2. 更新所有引用路径，从子模块路径改为主仓库路径
> 3. 确保所有相关文件中的引用都已更新

---

### 3. Markdown 渲染不一致问题

**问题现象**：在 HTML 标签（如 `<details>`、`<div>`）内使用 Markdown 语法时，本地预览和 GitHub Pages 渲染可能不一致。

**原因分析**：kramdown 在 HTML 标签内处理 Markdown 有限制，不同版本的 kramdown 对空白字符和换行的处理可能不同，导致本地 Jekyll 环境和 GitHub Pages 的渲染结果不一致。

**解决方案**：在 HTML 标签内嵌套 Markdown 内容时，优先使用 HTML 标签而不是 Markdown 语法：
- ✅ 引用块：使用 `<blockquote>` 而不是 `>`
- ✅ 列表：使用 `<ul>`/`<ol>` 和 `<li>` 而不是 `-` 或 `1.`
- ✅ 段落：使用 `<p>` 包裹段落内容
- ✅ 代码：使用 `<code>` 或 `<pre><code>` 而不是反引号

**给 AI 的提示词**：
> Markdown 本地预览和 GitHub Pages 渲染不一致时：
> 
> 在 HTML 标签（如 `<details>`、`<div>`）内编写内容时，请使用 HTML 标签而不是 Markdown 语法，以确保在本地和 GitHub Pages 上渲染一致。例如：
> - 使用 `<blockquote>` 而不是 `>` 来创建引用块
> - 使用 `<ul>`/`<ol>` 和 `<li>` 而不是 `-` 或 `1.` 来创建列表
> - 使用 `<p>` 包裹段落内容
> - 使用 `<code>` 或 `<pre><code>` 来显示代码

## 🎉 项目成果

### 核心功能
- ✅ 响应式设计，完美适配移动端和桌面端
- ✅ 深色/浅色模式无缝切换
- ✅ PWA 离线访问支持
- ✅ SEO 优化（自动生成 Sitemap、Meta 标签）
- ✅ 评论系统集成（Giscus）
- ✅ 全文站内搜索
- ✅ RSS 订阅支持

### 性能表现
- **首屏加载**: < 1s
- **Lighthouse 评分**: 95+
- **PWA**: 完全支持
- **SEO**: Google 搜索引擎友好

### 技术亮点
- 自动化 CI/CD 部署流程
- 模块化的 SCSS 样式管理
- 基于 Liquid 的灵活模板系统
- 本地搜索索引，无需后端支持

## 💡 总结与收获

### 技术收获
1. **Jekyll 静态网站生成器**：掌握了从零搭建到部署的完整流程
2. **GitHub Actions**：学会配置自动化部署 workflow，实现推送即发布
3. **Liquid 模板语言**：了解了模板引擎的工作原理和最佳实践
4. **PWA 技术**：实现了离线访问和添加到主屏幕功能
5. **SEO 优化**：学习了静态网站的搜索引擎优化技巧

### 踩坑与经验

#### 1. 子模块管理陷阱
不要直接修改主题的子模块文件，GitHub Pages 构建时可能导致文件丢失。正确做法是复制到主仓库并更新引用。

#### 2. HTML + Markdown 混用问题
避免在 HTML 标签内使用 Markdown 语法，会导致本地和线上渲染不一致。统一使用 HTML 标签更可靠。

#### 3. 本地与线上环境一致性
始终在本地完整测试后再推送部署，确保依赖版本、配置、资源路径等完全一致。

### 后续优化方向
- [ ] 添加更多自定义组件（如时间线、项目展示卡片等）
- [ ] 优化图片加载性能（懒加载、WebP 格式、CDN）
- [ ] 集成图床服务，提升访问速度
- [ ] 完善文档和使用教程
- [ ] 探索更多 Jekyll 插件，增强功能

---

**项目仓库**: [GitHub - lyzbcy/lyzbcy.github.io](https://github.com/lyzbcy/lyzbcy.github.io)  
**在线访问**: [https://lyzbcy.github.io/](https://lyzbcy.github.io/)